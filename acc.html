<html>
    <head>
    </head>
    <body>
        <div id="sensor">Sensor</div>
        <script>
            window.addEventListener('click', function() {
                window.location.reload();
            });
            var sensor = document.querySelector('#sensor');

            var degreesChanged = 0;
            var vibrating = false;
            var lastDir = null;

            setInterval(function() {
                console.log('degreesChanged', degreesChanged);
                if (degreesChanged > 5) { // TODO
                    vibrating = true;
                } else {
                    vibrating = false;
                }
                console.log('vibrating', vibrating);
                degreesChanged = 0;
            }, 1000);

            function deviceOrientationHandler(tiltLR, tiltFB, dir) {
                // console.log('gamma', tiltLR);
                // console.log('beta', tiltFB);
                dir = tiltLR;
                console.log('alpha', dir);
                console.log('alpha difference', Math.abs(dir - lastDir));
                if (lastDir !== null) {
                    degreesChanged += Math.abs(dir - lastDir);
                }
                lastDir = dir;
            }

            window.addEventListener('deviceorientation', function(event) {
                console.log('[sensor] deviceorientation');

                // gamma is the left-to-right tilt in degrees, where right is positive
                var tiltLR = event.gamma;

                // beta is the front-to-back tilt in degrees, where front is positive
                var tiltFB = event.beta;

                // alpha is the compass direction the device is facing in degrees
                var dir = event.alpha;

                // call our orientation event handler
                deviceOrientationHandler(tiltLR, tiltFB, dir);

              }, false);
        </script>
    </body>
</html>
